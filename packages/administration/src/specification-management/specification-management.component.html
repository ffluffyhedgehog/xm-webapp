<ul class="nav nav-pills nav-pills-primary nav-pills-icons justify-content-center mb-3" role="tablist">
  <li *ngFor="let type of specificationTypes" class="nav-item">
    <a [class.active]="type.slug === currentSpecificationSlug"
       [queryParams]="{slug: type.slug}"
       [routerLink]="'.'"
       class="nav-link" data-toggle="tab"
       role="tab">
      <i class="material-icons">{{type.icon}}</i>
      <span translate="admin-config.specification-mng.{{type.slug}}.title"></span>
    </a>
  </li>
</ul>

<mat-card [ngSwitch]="currentSpecificationSlug" class="mb-3">

  <xm-ui-mng *ngSwitchCase="'ui'" [readOnlyMode]="readOnlyMode"></xm-ui-mng>

  <xm-entity-spec-mng *ngSwitchCase="'entity'" [readOnlyMode]="readOnlyMode"></xm-entity-spec-mng>

  <xm-timeline-mng *ngSwitchCase="'timeline'" [readOnlyMode]="readOnlyMode"></xm-timeline-mng>

  <ng-container *ngSwitchCase="'uaa-login'">
    <div class="text-center pb-3">
      <button (click)="validateLoginsSpecification();"
              *ngIf="!isUaaLoginSpecValid"
              [translate]="'admin-config.specification-mng.validate'"
              color="primary"
              mat-flat-button
              type="submit"
              [disabled]="readOnlyMode">
      </button>
      <button (click)="updateLoginsSpecification();"
              *ngIf="isUaaLoginSpecValid"
              [translate]="'admin-config.specification-mng.uaa-login.save'"
              color="primary"
              mat-flat-button
              type="submit"
              [disabled]="readOnlyMode">
      </button>
      <div class="text-center">
        <div *ngIf="loginsValidation && !loginsValidation.valid" [innerHtml]="loginsValidation?.errorMessage"
             class="text-danger">
        </div>
      </div>
    </div>
    <div class="text-right">
      <div (textChanged)="onLoginsSpecificationChange($event)"
           [autoUpdateContent]="true"
           [mode]="'yaml'"
           [options]="aceEditorOptions"
           [readOnly]="false"
           [style.min-height]="'150px'"
           [style.width]="'100%'"
           [text]="loginsSpecificationIn"
           style="overflow-x: auto; border: 1px solid lightgray;"
           xmAceEditor>
        <span translate="admin-config.specification-mng.loading"></span>
      </div>
    </div>
  </ng-container>

  <xm-timeline-mng *ngSwitchCase="'uaa'" [readOnlyMode]="readOnlyMode"></xm-timeline-mng>

  <ng-container *ngSwitchCase="'tenant'">
    <div class="text-center pb-3">
      <button (click)="updateTenantConfig();"
              *ngIf="isTenantSpecValid"
              [class.loading]="tenantSpecificationProgress"
              [disabled]="tenantSpecificationProgress || readOnlyMode"
              color="primary"
              mat-flat-button
              type="button">
        {{'admin-config.specification-mng.tenant.save' | translate}}
      </button>
      <button (click)="validateTenantSpecification();"
              *ngIf="!isTenantSpecValid"
              color="primary"
              mat-flat-button
              type="button"
              [disabled]="readOnlyMode">
        {{'admin-config.specification-mng.validate' | translate}}
      </button>

      <div class="text-center">
        <div *ngIf="tenantValidation && !tenantValidation.valid" [innerHtml]="tenantValidation?.errorMessage"
             class="text-danger">
        </div>
      </div>
    </div>
    <div class="text-right">
      <div (textChanged)="onTenantSpecificationChange($event)"
           [autoUpdateContent]="true"
           [mode]="'yaml'"
           [options]="aceEditorOptions"
           [readOnly]="false"
           [style.min-height]="'150px'"
           [style.width]="'100%'"
           [text]="tenantSpecificationIn"
           style="overflow-x: auto; border: 1px solid lightgray;"
           xmAceEditor>
        <span translate="admin-config.specification-mng.loading"></span>
      </div>
    </div>
  </ng-container>

  <xm-private-ui-mng *ngSwitchCase="'privateui'" [readOnlyMode]="readOnlyMode"></xm-private-ui-mng>

</mat-card>
